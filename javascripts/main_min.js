goog.provide('tetris');goog.require('tetris.Board');goog.require('tetris.Piece');goog.require('tetris.localStorage');var COLOR_RED=[255,0,0];var COLOR_BLUE=[0,0,255];var COLOR_BLACK=[0,0,0];var COLOR_WHITE=[255,255,255];tetris.intervalInt={i:0};tetris.keyCode={key:0};tetris.Score={score:0,allScores:[]};tetris.Level={level:1};tetris.blocks=[];tetris.blockInfo=function(){this.isBlocked=false;this.color=0};tetris.isEnd={end:false};tetris.rowsCleared={num:0};tetris.gameSpeed={num:800};tetris.cannotMove={bool:false};tetris.Tetromino=function(){this.pattern=0;this.rotation=0;this.x=0;this.y=0};tetris.resetblocks=function(){var row,col;for(row=0;row<=tetris.Board.HEIGHT;row++){for(col=0;col<=tetris.Board.WIDTH;col++){if(tetris.blocks[row*tetris.Board.WIDTH+col]==undefined)var blockInfo=new tetris.blockInfo();tetris.blocks[row*tetris.Board.WIDTH+col]=blockInfo}}};tetris.pausegame=function(){if(pauseMe.value=="Pause Game"){pauseMe.value="Start Game";document.onkeydown=function(event){var keyCode;if(event==null){keyCode=window.event.keyCode}else{keyCode=event.keyCode};if(keyCode==80){pauseMe.value="Pause Game";tetris.Board.isEnd();if(tetris.isEnd.end==false){tetris.intervalInt.i=setInterval("tetris.Piece.move(ctx, buffer, buffer_ctx, tetromino)",tetris.gameSpeed.num)}}else if(keyCode==82){tetris.restartgame()}};clearInterval(tetris.intervalInt.i)}else{pauseMe.value="Pause Game";tetris.Board.isEnd();if(tetris.isEnd.end==false){tetris.intervalInt.i=setInterval("tetris.Piece.move(ctx, buffer, buffer_ctx, tetromino)",tetris.gameSpeed.num)}}};tetris.restartgame=function(){tetris.keyCode.key=0;tetris.Score.score=0;tetris.Level.level=1;tetris.rowsCleared.num=0;tetris.gameSpeed.num=800;tetris.Score.allScores=[];tetris.isEnd.end=false;tetris.cannotMove.bool=false;tetris.blocks=[];tetris.resetblocks();tetris.localStorage.retrieve();if(tetris.Score.allScores.length!=0){tetris.localStorage.list()};gameSpeed.innerHTML=tetris.gameSpeed.num;tetris.Board.updateLevel();tetris.Board.updateScore();pauseMe.value="Pause Game";tetris.Piece.drawProjection(ctx,buffer,buffer_ctx,projection,"white");tetris.Piece.redraw(ctx,buffer,buffer_ctx);tetris.Piece.startTetromino(tetromino);tetris.Piece.copy(tetromino,projection);tetris.Board.showNextPiece();clearInterval(tetris.intervalInt.i);tetris.intervalInt.i=setInterval("tetris.Piece.move(ctx, buffer, buffer_ctx, tetromino)",tetris.gameSpeed.num)};